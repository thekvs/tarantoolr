sudo: required

language: r
r:
        - oldrel
        - release

warnings_are_errors: false

apt_packages:
        - cmake
        - gcc
        - g++

r_packages:
        - Rcpp
        - testthat
        - RApiSerialize

before_install:
        - curl http://download.tarantool.org/tarantool/1.6/gpgkey | sudo apt-key add -
        - sudo echo "deb http://download.tarantool.org/tarantool/1.6/ubuntu/ $(lsb_release -c -s) main" > /etc/apt/sources.list.d/tarantool_1_6.list
        - sudo echo "deb-src http://download.tarantool.org/tarantool/1.6/ubuntu/ $(lsb_release -c -s) main" >> /etc/apt/sources.list.d/tarantool_1_6.list
        - sudo apt-get update
        - sudo apt-get -y install tarantool
        - sudo service tarantool stop
        - sudo ln -s /etc/tarantool/instances.available/example.lua /etc/tarantool/instances.enabled/example.lua
        - sudo service tarantool start
        - sudo chmod a+w /var/run/tarantool/example.control
